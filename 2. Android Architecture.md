# 2. 안드로이드 아키텍처

작성한 소스 코드의 설치 파일 생성 과정과 스마트폰에서 실행되기까지의 과정을 알아보자.

**Keyword**: 컴파일, 빌드, 런타임, APK 



### 소스코드 작성부터 실행.

- <ㅡ*각 단계를 실행하기까지 실제 내부에서는 어떤 진행이 이루어지는지*



**1. 소스 코드 작성**: 코틀린으로 소스코드 작성.

**2. 설치 파일 생성**: 명령을 통해 안드로이드에서 실행될 수 있는 설치 파일 형태로 변환.

- **빌드(컴파일 + 비밀번호)**: <br>소스 코드를 바이트코드로 변환하며 APK 매니저에서 비밀번호를 가지고 있는 키 스토어와 조합하여 최종 설치 파일을 생성한다.

​       

​    -*바이트 코드 ?: 우리가 작성한 코틀린 코드를 가상 머신인 안드로이드 런타임에서 이해할 수 있도록 변환한 코드*<br>    -*APK ?: Android Package의 줄임말. 안드로이드 설치 파일의 확장자명으로 사용된다.*  <br>    -*컴파일 ?: 사람이 읽을 수 있는 형태의 소스 코드를 컴퓨터가 읽을 수 있는 형태의 기계어로 변환해주는 과정.*

**3. 업로드**: 구글 플레이 스토어에 앱을 업로드.

- 파일 검증: <br>구글 플레이 스토어에서 앱의 정상작동 여부와 보안상의 문제 등을 검수한다. 

  

**4. 앱 등록**: 구글 플레이 스토어에 앱 등록.

**5. 앱 선택/설치**: 스마트폰으로 구글 플레이 스토어에 접속한 다음 설치할 앱을 선택 및 설치.

​    **앱 선택**

- 플랫폼 버전 체크:<br>스마트폰으로 구글 플레이 스토어에 접속하면 스마트폰의 플랫폼 버전을 확인한 다음 설치 가능한 앱의 목록만 보여준다.

​    **앱 설치**

- AOT 컴파일/설치 권한 체크:<br>APK파일을 설치하면 리눅스에서 실행 가능한 파일로 안드로이드폰 내부에서 한 번 더 컴파일 한다.<br>*(이 과정을 통해 실행 속도가 빨라지며 사용자에게 기능의 사용 권한을 요청한다.)*



**6. 스마트폰에서 실행**: 아이콘을 터치해서 앱을 실행한다.<br> 앱이 가장 상단에서 애플리케이션 영역에서 동작하고, 안드로이드는 중간에 있는 안드로이드 런타임 영역에서 개발자가 만든 앱을 제어한다.

- JIT 컴파일/실행 권한체크:<br>AOT 컴파일/설치 권한 체크 단계에서는 **필요한 파일만 컴파일**한다. <br>그러므로 첫 번째 앱을 실행할 떄 미리 컴파일되지 않은 파일을 호출하면서 리눅스 실행 파일로 컴파일한다. <br>또한 권한 중 '실행 시 권한'이 포함되어 있으면 해당 코드가 동작해서 사용자에게 확인 요청을 한다.

​       -AOT(Ahead of Time) ?<br>       앱을 설치하면 설치 파일의 일부가 리눅스 운영체제에서 실행할 수 있는 파일 형태로 한 번 더 컴파일되는 구조를 말한다.<br>

​       -JIT(Just-In-Time) ?<br>       앱을 실행하면 호출되는 파일 중에서 컴파일되지 않았던 파일이 한 번 더 컴파일되는 구조를 말한다.

​       *위 두 컴파일 형태를 같이 사용함으로써 효율성을 높인다.*





